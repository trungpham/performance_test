<% content_for :javascript do %>
  <%= javascript_include_tag 'jquery-1.10.2.min' %>
  <%= javascript_include_tag 'fancybox/jquery.fancybox.pack' %>
  <%= javascript_tag do %>
    $(function() {
      
      $('.timed').on('click', function() {
        var startTime = (new Date()).getTime(),
            baseUrl = /([^?]*)/.exec($(this).attr('href'))[0];
        
        $(this).attr('href', baseUrl + '?' + startTime);
        return true;
      });

      $('#clientInlineModal').fancybox({
        width: 650,
        height: 450,
        autoScale: false,
        transitionIn: 'none',
        transitionOut: 'none',
        type: 'iframe',
        modal: true
      });
      
    });
  <% end %>
<% end %>

<h1>Performance Tests</h1>
<ul>
  <li><a class="timed" href="/server">Server</a></li>
  <li><a class="timed" href="/client">Client: standalone page</a></li>
  <li><a id="clientInlineModal" href="/client">Client: modal with iframe</a></li>
</ul>
